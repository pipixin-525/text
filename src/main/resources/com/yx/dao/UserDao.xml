<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yx.dao.UserDao">
    <!--根据用户名和密码查询用户信息
    public User selectUserByUserNameAndPassword(@Param("userName") String userName, @Param("password") String password);-->
    <select id="selectUserByUserNameAndPassword" resultType="com.yx.entities.User">
        select user_id, user_name, password, user_balance, user_pic
        from db2.user
        where user_name = #{userName}
          and password = #{password}
    </select>


    <!--查询账户余额
    public Double selectUserBalanceByUserId(@Param("userId") Integer userId);-->
    <select id="selectUserBalanceByUserId" resultType="double">
        select user_balance
        from db2.user
        where user_id = #{userId}
    </select>


    <!--根据用户名和密码查询用户数据笔数
    public Integer selectUserCountByUserNameAndPassword(@Param("userName") String userName, @Param("password") String password);-->
    <select id="selectUserCountByUserNameAndPassword" resultType="int">
        select count(user_id)
        from db2.user
        where user_name = #{userName}
          and password = #{password}
    </select>


    <!--更改账户余额
    public int updateUserBalance(@Param("userId") Integer userId, @Param("addMoney") Double addMoney);-->
    <update id="updateUserBalance">
        update db2.user
        set user_balance = user_balance + #{addMoney}
        where user_id = #{userId}
    </update>
</mapper>